# VJ YouTube Player

YouTube IFrame Player APIを使用したA/B 2プレイヤーによるプリロード+滑らかな切り替えを実現するWebプレイヤーです。

## 機能

- **A/B 2プレイヤー方式**: 常に2つのプレイヤーを保持し、片方が再生中に次の動画をプリロード
- **滑らかな切り替え**: フェードトランジションによるシームレスな動画切り替え
- **自動ループ再生**: 動画終了時に自動的にループ再生
- **ミュート固定**: VJ用途を想定し、常にミュート状態で再生
- **コマンドベース制御**: HTTPポーリングによる外部からの制御

## 使用方法

1. `player.html`をブラウザで開く
2. F11キーで全画面表示
3. HTTPサーバーからコマンドを受信して動画を制御

### 起動時の動作

- **自動再生**: 起動後2秒でデフォルト動画（f4sVPnQGu4c）を自動再生
- **状態リセット**: 起動時にすべての状態をリセットし、枠の色をデフォルト（茶色）に設定
- **ループ再生**: デフォルト動画も自動でループ再生

## コマンド仕様

### エンドポイント
```
GET http://127.0.0.1:<port>/poll
```

### レスポンス形式
```json
{
  "cmd": "PRELOAD|PLAY",
  "videoId": "YouTube動画ID"
}
```

### コマンド種類

#### PRELOAD
次の動画をプリロード開始します。
```json
{
  "cmd": "PRELOAD",
  "videoId": "dQw4w9WgXcQ"
}
```

#### PLAY
指定された動画を再生開始します。
```json
{
  "cmd": "PLAY",
  "videoId": "dQw4w9WgXcQ"
}
```

## 技術仕様

### プレイヤー設定
- ミュート固定
- 自動再生ON
- ループ再生ON
- コントロール非表示
- 100vw × 100vh全画面表示

### ポーリング
- デフォルトポート: 8080
- ポーリング間隔: 100ms
- 自動再接続機能

### トランジション
- フェード時間: 0.3秒
- Z-indexによるプレイヤー重ね付け
- CSSトランジション使用

## ファイル構成

```
web/
├── player.html  # メインHTMLファイル
├── player.css   # スタイルシート
└── player.js    # プレイヤーロジック
```

## ブラウザ対応

- Chrome/Chromium
- Firefox
- Safari
- Edge

## 注意事項

- YouTube IFrame APIの読み込みが必要
- 全画面表示を推奨（F11）
- ローカルHTTPサーバーが必要
- 動画は常にミュートで再生
